import type { Send${name}Input } from 'types/graphql'

import { logger } from 'src/lib/logger'
import type { PubSubChannelsType } from 'src/lib/realtime'

export const room = ({ id }) => [id]

export const send${name} = async (
  { input }: { input: Send${name}Input },
  { context }: { context: { pubSub: PubSubChannelsType } }
) => {
  logger.debug({ input }, 'sending ${name} ....')

  const { id, from, body } = input

  context.pubSub.publish(`${name}:<%= '$' %>{id}`, { from, body })

  return input
}

import { createPubSub, InMemoryLiveQueryStore } from '@redwoodjs/graphql-server'

import type { NewMessageChannel } from 'src/subscriptions/newMessage/newMessage'

export const liveQueryStore = new InMemoryLiveQueryStore()

export type OldMessageChannel = {
  oldMessage: [payload: { name: string }]
}

export type PubSubChannels = NewMessageChannel<string> & OldMessageChannel

export const pubSub = createPubSub<PubSubChannels>()

export type PubSubChannelsType = typeof pubSub
